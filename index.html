<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






  
  
    
  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/Han/3.3.0/han.min.css">



  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple_touch_icon_ding.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon_32x32_ding.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon_16x16_ding.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo_ding.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.1',
    sidebar: {"position":"right","display":"always","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Math">
<meta property="og:type" content="website">
<meta property="og:title" content="Jasoncoding13&#39;s Page">
<meta property="og:url" content="https://jasoncoding13.github.io/index.html">
<meta property="og:site_name" content="Jasoncoding13&#39;s Page">
<meta property="og:description" content="Math">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jasoncoding13&#39;s Page">
<meta name="twitter:description" content="Math">





  
  
  <link rel="canonical" href="https://jasoncoding13.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Jasoncoding13's Page – 丁13的主页</title>
  




  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140857883-1"></script>
  <script>
    var host = window.location.hostname;
    if (host !== "localhost" || !true) {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-140857883-1');
    }
  </script>









  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jasoncoding13's Page</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">丁13的主页</h1>
      
    
    
      <a>
        <img class="custom-logo-image" src="/images/apple_touch_icon_ding.png" alt="Jasoncoding13's Page">
      </a>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">19</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">7</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">9</span></a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    
  
  

  

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2phc29uY29kaW5nMTM=" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></span>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasoncoding13.github.io/2020/11/22/signed-number-representation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Chan">
      <meta itemprop="description" content="Math">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jasoncoding13's Page">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/11/22/signed-number-representation/" class="post-title-link" itemprop="url">signed_number_representation.md</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-11-22 23:01:26" itemprop="dateCreated datePublished" datetime="2020-11-22T23:01:26+08:00">2020-11-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-11-30 19:12:17" itemprop="dateModified" datetime="2020-11-30T19:12:17+08:00">2020-11-30</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/11/22/signed-number-representation/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/11/22/signed-number-representation/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1 id="有符号数的表示">有符号数的表示</h1>
<p>有符号数的表示，是指将负数编码表示为二进制形式。目前已知的常见的有符号数的表示有四种：原码、反码、补码、移码。</p>
<h2 id="原码-signed-magnitude-representation">原码 Signed magnitude representation</h2>
<p>原码是通过分配一个符号位表示数的符号，通常是最高位，0代表正数，1代表负数。一个字节8位，使用最高位表示符号位，则数的表示范围是十进制的-127到127。十进制数-43=-(32+8+2+1)使用原码表示1010 1011。</p>
<h2 id="反码-ones-complement">反码 One's complement</h2>
<p>反码也是通过一个符号位表示数的符号，通常也是最高位，0代表正数，1代表负数。一个正数的反码与其原码相同，例如十进制数13=8+4+1的1字节原码和反码都是00001101。一个负数的符号位为1，数值位是该负数的相反数的原码数值位互换0和1。因为负数反码的符号位也可以理解成该负数的相反数的原码符号位互换0和1（0&gt;1）。所以，负数的反码即其相反数的原码互换0和1。例如十进制数-13=-(8+4+1)的绝对值为13，13的原码是0000 1101，原码互换0和1就是1111 0010。1字节反码的表示范围仍然是十进制的-127到127。</p>
<h2 id="补码-twos-complement">补码 Two's complement</h2>
<p>0与正数的补码与其原码相同，负数的补码等于其反码+1。例如，十进制数-27=-(16+8+2+1)，27的原码为0001 1011，则-27反码为1110 0100，-27补码为1110 0101。1字节补码的表示范围是十进制的-128到127。</p>
<h2 id="例子">例子</h2>
<p>计算43-13， 43的补码等于原码0010 1011，-13的补码等于反码1111 0010加0000 0001即1111 0011。0010 1011 + 1111 0011 = 0001 1110。若某数补码为0001 1110，其原码等于补码，该数为十进制16+8+4+2=30。</p>
<p>计算-13-27，-13的补码即1111 0011，-27的补码即1110 0101。 1111 0011 + 1110 0101 = 1101 1000。若某数补码为1101 1000，其反码为1101 0111，其原码为0010 1000，该数为十进制-(32+8)=-40。</p>
<h2 id="补码原理">补码原理</h2>
<p>这个补码的原理真的搞死我了。</p>
<h3 id="模算数">模算数</h3>
<p>模算数就是一种整数算术系统，时钟就是一个典型例子。十二小时制的时钟，不能表示大于12或小于1的钟点（整数）。例如，7点再过8小时，时钟指向3点而不是15点。这就是模12的模算术系统。它有什么好处呢？那就是可以利用同余关系简化运算。在模算术系统中，a与b的加减乘法运算，其结果与对应a的同余a’与b的同余b‘的相等。例如，7+8=-5+8=3，其中7与-5关于12同余。</p>
<h3 id="补码回顾">补码回顾</h3>
<p>回顾下1000 0000在二进制编码表示128，在补码表示-128，128与-128关于模256同余。补码本质就是把128<sub>255的编码映射到其在-128</sub>-1的对应同余上。计算法则沿用的是非负范围的二进制编码运算，但是整个编码的值域移动了。举个例子加深印象，假设补码使用1000 0000表示128，而不是-128。计算128-127=1000 0000+1000 0001 =0000 0001（最高位溢出）。有没有感觉？所以改变的只是我们约定的编码的值域。对负数求补码的过程，求反码再加1。例如-127，其相反数127的原码0111 1111，-127的反码1000 0000。注意0111 1111+1000 0000=1111 1111即255，可得-127=255-127+1=129。所以负数的补码，就是求其对应的正同余的原码。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasoncoding13.github.io/2020/03/12/fluent-python-charpter-1-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Chan">
      <meta itemprop="description" content="Math">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jasoncoding13's Page">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/12/fluent-python-charpter-1-2/" class="post-title-link" itemprop="url">Fluent Python Charpter 1.2</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-12 18:39:59 / 修改时间：15:40:30" itemprop="dateCreated datePublished" datetime="2020-03-12T18:39:59+08:00">2020-03-12</time>
            

            
              

              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/03/12/fluent-python-charpter-1-2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/03/12/fluent-python-charpter-1-2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1 id="fluent-python-charpter-1.2">Fluent Python Charpter 1.2</h1>
<h2 id="how-special-methods-are-used">How Special Methods Are Used</h2>
<ol type="1">
<li><p>对于我们自定义的类，我们已经知道built-in functions是如何使用自定义的special methods。那么对于已经定义好的built-in types呢?这就跟解释器有关了。但是可以确定的是对内建类型使用内建函数一定是比我们显式定义的special methods快很多。例如Cpython中的built-in types都已经编译了。</p></li>
<li><p>通常情况下，不需要自定义special methods，除非是自研library需要我们自定义数据类型或者使用library需要我们重写special method的。</p></li>
</ol>
<h2 id="emulating-numeric-types">Emulating Numeric Types</h2>
<p>再来个vector的例子来体现更多的快乐。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Vector</span>:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        self.x = x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        self.y = y</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        <span class="keyword">return</span> <span class="string">'Vecotr(&#123;&#125;, &#123;&#125;)'</span>.format(self.x, self.y)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        <span class="keyword">return</span> self.__repr__()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, v)</span>:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        x = self.x + v.x</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        y = self.y + v.y</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        <span class="keyword">return</span> Vector(x, y)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v = Vector(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v += Vector(<span class="number">-1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v</span><br></pre></td></tr></table></figure>
<ol type="1">
<li><code>___repr__</code>定义了</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasoncoding13.github.io/2020/03/12/fluent-python-charpter-1-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Chan">
      <meta itemprop="description" content="Math">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jasoncoding13's Page">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/12/fluent-python-charpter-1-1/" class="post-title-link" itemprop="url">Fluent Python Charpter 1.1</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-12 16:20:54 / 修改时间：15:39:15" itemprop="dateCreated datePublished" datetime="2020-03-12T16:20:54+08:00">2020-03-12</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/note，-fluent-python/" itemprop="url" rel="index"><span itemprop="name">Note， Fluent Python</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/03/12/fluent-python-charpter-1-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/03/12/fluent-python-charpter-1-1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1 id="fluent-python-charpter-1.1">Fluent Python Charpter 1.1</h1>
<h2 id="a-pythonic-card-deck">A Pythonic Card Deck</h2>
<p>这个post在于介绍Python的Data Model。</p>
<p>书中的说法是，Data Model是framework。某些syntax或者built-in functions会触发解释器调用Python已经定义好的special methods。最直接的2个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len([<span class="number">0</span>, <span class="number">1</span>]), [<span class="number">0</span>, <span class="number">1</span>].__len__()</span><br><span class="line">(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="string">'a'</span>: <span class="number">0</span>&#125;[<span class="string">'a'</span>], &#123;<span class="string">'a'</span>: <span class="number">0</span>&#125;.__getitem__(<span class="string">'a'</span>)</span><br><span class="line">(<span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p><code>len()</code>触发的是<code>list.__len__()</code>，<code>dict[key]</code>语法触发的就是<code>dict.__getitem__(key)</code>。</p>
<p>这里再引用一个游戏王卡组的例子。</p>
<p>先用<code>namedtuple</code>定义卡牌，再实例化一张青眼白龙，<code>typename</code>是这类<code>tuple</code>的意义， <code>field_names</code>就是<code>tuple</code>中对应顺序元素的意义。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> collections</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Card = collections.namedtuple(typename=<span class="string">'Card'</span>, field_names=[<span class="string">'Star'</span>, <span class="string">'ATK'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Card(<span class="number">8</span>, <span class="number">3000</span>)</span><br><span class="line">Card(Star=<span class="number">8</span>, ATK=<span class="number">3000</span>)</span><br></pre></td></tr></table></figure>
<p>然后定义有青眼白龙，黑暗魔术师和真红眼黑龙的卡组。我们还用切片的方式抽出卡组的第一张牌。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">YuGiOhDeck</span>:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        self._cards = [Card(<span class="number">8</span>, <span class="number">3000</span>), Card(<span class="number">7</span>, <span class="number">2500</span>), Card(<span class="number">7</span>, <span class="number">2400</span>)]    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        <span class="keyword">return</span> len(self._cards)    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, position)</span>:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>        <span class="keyword">return</span> self._cards[position]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>deck = YuGiOhDeck()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(deck), deck[<span class="number">0</span>]</span><br><span class="line">(<span class="number">3</span>, Card(Star=<span class="number">8</span>, ATK=<span class="number">3000</span>))</span><br></pre></td></tr></table></figure>
<p>问题来了，我们抽牌不是神抽，那怎么抽卡组？所以需要写一个抽牌的method?</p>
<p>这个时候就体现出Data Model的好处。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> random <span class="keyword">import</span> choice</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>choice(deck)</span><br><span class="line">Card(Star=<span class="number">7</span>, ATK=<span class="number">2500</span>)</span><br></pre></td></tr></table></figure>
<p>通过查看<code>random.choice</code>的源码，其实包含了三个步骤，</p>
<ol type="1">
<li>调用<code>len(seq)</code>获得序列的长度</li>
<li>产生一个<code>[0, length-1]</code>的随机整数<code>i</code></li>
<li><code>seq[i]</code>切片</li>
</ol>
<p>所以Data Model的好处就在于，提前定义了很多神奇的operations，我们只需要定义好它们所需要的special methods，就可以套用那些opeartions。</p>
<p>此外，因为我们已经定义好了<code>__getitem__</code>，所以我们还能通过切片神抽。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>deck[<span class="number">1</span>]</span><br><span class="line">Card(Star=<span class="number">7</span>, ATK=<span class="number">2500</span>)</span><br></pre></td></tr></table></figure>
<p>定义好<code>__getitem__</code>，意味着<code>YuGiOhDeck</code>是iterable，于是<code>reversed()</code>，<code>sorted()</code>，<code>in</code>都支持了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(reversed(deck))</span><br><span class="line">[Card(Star=<span class="number">7</span>, ATK=<span class="number">2400</span>), Card(Star=<span class="number">7</span>, ATK=<span class="number">2500</span>), Card(Star=<span class="number">8</span>, ATK=<span class="number">3000</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(sorted(deck, key=<span class="keyword">lambda</span> card: card[<span class="number">1</span>]))</span><br><span class="line">[Card(Star=<span class="number">7</span>, ATK=<span class="number">2400</span>), Card(Star=<span class="number">7</span>, ATK=<span class="number">2500</span>), Card(Star=<span class="number">8</span>, ATK=<span class="number">3000</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Card(<span class="number">1</span>, <span class="number">1300</span>) <span class="keyword">in</span> deck</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p>总结一下，我们不需要显式地定义一个新的类继承于某些已经基本的类，只需要通过定义special methods就能让我们定义的类可以使用到python的很多语言特性。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasoncoding13.github.io/2020/03/12/lists-copies/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Chan">
      <meta itemprop="description" content="Math">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jasoncoding13's Page">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/12/lists-copies/" class="post-title-link" itemprop="url">lists-copies</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-12 12:06:30" itemprop="dateCreated datePublished" datetime="2020-03-12T12:06:30+08:00">2020-03-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-11-30 19:17:21" itemprop="dateModified" datetime="2020-11-30T19:17:21+08:00">2020-11-30</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/03/12/lists-copies/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/03/12/lists-copies/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1 id="列表复制">列表复制</h1>
<p>如下分别是三种复制， <code>=</code>，切片（Shallow Copy）和<code>deepcopy</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> copy <span class="keyword">import</span> deepcopy</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = x </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z = x[:] </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>u = deepcopy(x)</span><br></pre></td></tr></table></figure>
<p>首先，这三种复制有共同点：</p>
<p><code>x==y==z==u</code>返回<code>True</code>，它们的值都是一样的。</p>
<p>对于第一种<code>=</code>，</p>
<p>因为列表是mutable对象，这里的y和x将指向同一个地址。</p>
<p><code>x is y</code>返回<code>True</code>，表明它们是同一个object，只是两个names。</p>
<p>对于第二种和第三种，`<code>z is x or u is x</code>返回<code>False</code>。</p>
<p>它们已经和原来的<code>x</code>不是同一个对象了，只是它们的values是相等的。</p>
<p>重点来了，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="number">0</span>] = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x, y, z, u</span><br><span class="line">([<span class="number">4</span>, [<span class="number">5</span>, <span class="number">3</span>]], [<span class="number">4</span>, [<span class="number">5</span>, <span class="number">3</span>]], [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">5</span>, <span class="number">3</span>]], [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>]])</span><br></pre></td></tr></table></figure>
<p>可以看见，当我们改变了<code>x</code>的第一个列表元素为整数<code>4</code>，第二个列表元素的第一个元素为<code>5</code>。</p>
<p><code>y</code>和<code>x</code>保持一致，因为它们本身就是同一个object。</p>
<p><code>z</code>是切片复制，浅复制。这个深浅是什么意思呢？<code>x</code>本身是个两层嵌套的列表。而浅复制<code>z = x[:]</code>就是指，建立一个和<code>x</code>等长的列表<code>z</code>，<code>z</code>中每个元素按照顺序指向<code>x</code>中元素对应的地址。此时，<code>x</code>的第一个元素从指向一个列表为<code>[0, 1]</code>的地址变成指向整数<code>4</code>的地址。而<code>x</code>第二个元素的地址没有改变，改变的是<code>x</code>第二个元素中第一个元素的指向，从指向整数<code>2</code>变成指向整数<code>5</code>。我们可以使用验证它们第二个元素在内存中的地址是不是一样的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(x[<span class="number">1</span>]) == id(z[<span class="number">1</span>])</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p>而深复制<code>u = deepcopy(x)</code>就好理解了，创建一个新的对象，递归地对<code>x</code>中元素进行复制，并重新分配内存地址。所以<code>u</code>和<code>x</code>已经是完全没有关联的对象。</p>
<p>待验证的个人说法，</p>
<p><code>y = x</code>是把建立变量名称<code>y</code>到<code>x</code>内存地址的映射。</p>
<p><code>z = x[:]</code>是建立变量名称<code>z</code>到某列表的映射，该列表元素的内存地址与<code>x</code>元素的相等。</p>
<p><code>u = deepcopy(x)</code>是建立变量名称<code>u</code>到某列表的映射，该列表元素的内存地址与<code>x</code>元素的无关。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasoncoding13.github.io/2020/03/12/python-coding-style/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Chan">
      <meta itemprop="description" content="Math">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jasoncoding13's Page">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/03/12/python-coding-style/" class="post-title-link" itemprop="url">Python-Coding-Style</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-03-12 11:52:05 / 修改时间：08:54:15" itemprop="dateCreated datePublished" datetime="2020-03-12T11:52:05+08:00">2020-03-12</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/03/12/python-coding-style/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/03/12/python-coding-style/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h1 id="代码风格相关">代码风格相关</h1>
<h2 id="源代码解释器和编码声明">源代码解释器和编码声明</h2>
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy90dXRvcmlhbC9pbnRlcnByZXRlci5odG1sI3NvdXJjZS1jb2RlLWVuY29kaW5n" title="https://docs.python.org/3/tutorial/interpreter.html#source-code-encoding">Python Tutorial Source Code Encoding<i class="fa fa-external-link"></i></span></p>
<p>常见的<code>.py</code>文件初始两行如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/urs/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br></pre></td></tr></table></figure>
<p>第一行的作用是声明解释器，仅在UNIX系统有效。</p>
<p>通常情况下，我们使用<code>python main.py</code>执行<code>main.py</code>脚本。 这里可以理解为告诉系统使用环境变量中的<code>python</code>去解释<code>main.py</code>。</p>
<p>如果我们在脚本的第一行声明了解释器，并对该脚本赋予执行权限。 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x main.py</span><br></pre></td></tr></table></figure></p>
<p>这样情况下，我们可以像执行shell脚本的方式<code>./main.py</code>执行脚本。</p>
<p>第二行的作用是声明编码。</p>
<p>默认编码是<code>utf-8</code>。</p>
<p>声明的编码必须是<code>codecs</code>支持的编码，如<code>cp1252</code>。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasoncoding13.github.io/2019/09/24/2019-09-24-Negative-Log-Likelihood/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Chan">
      <meta itemprop="description" content="Math">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jasoncoding13's Page">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/24/2019-09-24-Negative-Log-Likelihood/" class="post-title-link" itemprop="url">Negative Log Likelihood 对数似然损失函数</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-09-24 07:38:54" itemprop="dateCreated datePublished" datetime="2019-09-24T07:38:54+08:00">2019-09-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-10-02 18:12:34" itemprop="dateModified" datetime="2019-10-02T18:12:34+08:00">2019-10-02</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/calculus/" itemprop="url" rel="index"><span itemprop="name">Calculus</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/calculus/linear-algebra/" itemprop="url" rel="index"><span itemprop="name">Linear Algebra</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/09/24/2019-09-24-Negative-Log-Likelihood/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/24/2019-09-24-Negative-Log-Likelihood/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h3 id="摘要">摘要</h3>
<p>这篇文章的目标是使用矩阵形式表示二分类问题的对数似然损失函数和损失函数对参数的梯度。</p>
<h3 id="编码">0，1编码</h3>
<p>假设我们使用<span class="math inline">\(0, 1\)</span>分别对负类，正类进行编码，Negative Log Likelihood如下:</p>
<p><span class="math display">\[
\begin{align*}
\text{NLL} &amp;= - \Big(\sum_{i=1}^m y^{(i)}\log(\frac{1}{1+\exp(-{\bf w}^T{\bf x^{(i)}})})+(1-y^{(i)})\log(1-\frac{1}{1+\exp(-{\bf w}^T{\bf x^{(i)}})})\Big)\\
&amp;= - \Big(\sum_{i=1}^m -y^{(i)}\log\big(1+\exp(-{\bf w}^T{\bf x^{(i)}})\big)+(1-y^{(i)})\log(\frac{\exp(-{\bf w}^T{\bf x^{(i)}})}{1+\exp(-{\bf w}^T{\bf x^{(i)}})})\Big)\\
&amp;= - \Big(\sum_{i=1}^m -y^{(i)}\log\big(1+\exp(-{\bf w}^T{\bf x^{(i)}})\big)-y^{(i)}\log(\frac{\exp(-{\bf w}^T{\bf x^{(i)}})}{1+\exp(-{\bf w}^T{\bf x^{(i)}})})+\log(\frac{\exp(-{\bf w}^T{\bf x^{(i)}})}{1+\exp(-{\bf w}^T{\bf x^{(i)}})})\Big)\\
&amp;= - \bigg(\sum_{i=1}^m -y^{(i)}\log\Big(\big(1+\exp(-{\bf w}^T{\bf x^{(i)}})\big)\times\frac{\exp(-{\bf w}^T{\bf x^{(i)}})}{1+\exp(-{\bf w}^T{\bf x^{(i)}})}\Big)+\log(\frac{1}{1+\exp({\bf w}^T{\bf x^{(i)}})})\bigg)\\
&amp;=- \Big(\sum_{i=1}^m -y^{(i)}\log\big(\exp(-{\bf w}^T{\bf x^{(i)}})\big) + \log(\frac{1}{1+\exp({\bf w}^T{\bf x^{(i)}})})\Big)\\
&amp;=- \big(\sum_{i=1}^m y^{(i)}{\bf w}^T{\bf x^{(i)}} + \log(\frac{1}{1+\exp({\bf w}^T{\bf x^{(i)}})})\big)\\
&amp;= \sum_{i=1}^m \Big(-y^{(i)}{\bf w}^T{\bf x^{(i)}} + \log\big(1+\exp({\bf w}^T{\bf x^{(i)}})\big)\Big)\\
&amp;=-{\bf y}^TX{\bf w} + {\bf 1}^T\log\big(1+\exp(X{\bf w})\big)
\end{align*}
\]</span></p>
<p>微分如下： <span class="math display">\[
\begin{align*}
\text{d}l &amp;= \text d\Big(-{\bf y}^TX{\bf w} + {\bf 1}^T\log\big(1+\exp(X{\bf w})\big)\Big)\\
&amp;=\text d(-{\bf y}^TX{\bf w}) + \text d\Big({\bf 1}^T\log\big(1+\exp(X{\bf w})\big)\Big)\\
&amp;=-{\bf y}^TX\text d{\bf w} + {\bf 1}^T\Big(\frac{1}{1 + \exp(X{\bf w})} \odot \big(\exp(X{\bf w})\odot (X\text d{\bf w})\big)\Big)\\
&amp;=-{\bf y}^TX\text d{\bf w} + {\bf 1}^T \big(\frac{\exp(X{\bf w})}{1 + \exp(X{\bf w})}\odot (X\text d{\bf w})\big)\\
&amp;= -{\bf y}^TX\text d{\bf w} + {\bf 1}^T \big(\frac{1}{1 + \exp(-X{\bf w})}\odot (X\text d{\bf w})\big)\\
&amp;= \text tr(-{\bf y}^TX\text d{\bf w}) + \text tr\big({\bf 1}^T \big(\frac{1}{1 + \exp(-X{\bf w})}\odot (X\text d{\bf w})\big)\\
&amp;= \text tr(-{\bf y}^TX\text d{\bf w}) + \text tr\Big({\bf 1} \odot \frac{1}{1 + \exp(-X{\bf w})})^T (X\text d{\bf w})\big)\Big)\\
&amp;= \text tr(-{\bf y}^TX\text d{\bf w}) + \text tr\big((\frac{1}{1 + \exp(-X{\bf w})})^T X\text d{\bf w}\big)\\
&amp;= \text tr\big((\frac{1}{1 + \exp(-X{\bf w})}- {\bf y})^TX\text d{\bf w}\big)\\
&amp;= \text tr\Big(\big(X^T(\frac{1}{1 + \exp(-X{\bf w})}- {\bf y})\big)^T\text d{\bf w}\Big)
\end{align*}
\]</span> 注意此处我们认为<span class="math inline">\(\bf w\)</span>为<span class="math inline">\(n \times 1\)</span>的矩阵，其对应梯度也为<span class="math inline">\(n\times 1\)</span>的矩阵，即使用Denominator Layout表示。</p>
<p>所以，</p>
<p>梯度如下： <span class="math display">\[
\begin{align*} 
\nabla_{\bf w} \text{NLL} = X^T(\frac{1}{1 + \exp(-X{\bf w})}- {\bf y})
\end{align*}
\]</span></p>
<h3 id="编码-1">-1，1编码</h3>
<p>假设我们使用<span class="math inline">\(-1, 1\)</span>分别对负类，正类进行编码，loss function 如下： <span class="math display">\[
\begin{align*}
\text{NLL} &amp;= - \sum_{i=1}^m \log(\frac{1}{1+\exp(-y^{(i)}{\bf w}^T{\bf x^{(i)}})})\\
&amp;= \sum_{i=1}^m \log\big(1+\exp(-y^{(i)}{\bf w}^T{\bf x^{(i)}})\big)\\
&amp;= {\bf 1}^T\log\Big(1+ \exp\big(-{\bf y} \odot (X{\bf w})\big)\Big)
\end{align*}
\]</span></p>
<p>微分如下： <span class="math display">\[
\begin{align*}
{\text d}(NLL) &amp;= d\bigg({\bf 1}^T\log\Big(1+ \exp\big(-{\bf y} \odot (X{\bf w})\big)\Big)\bigg)\\
&amp;= {\bf 1}^T\bigg(\frac{1}{1+ \exp\big(-{\bf y} \odot (X{\bf w})\big)} \odot\Big(\exp\big(-{\bf y} \odot (X{\bf w})\big) \odot \big(-{\bf y} \odot (X\text d{\bf w})\big)\Big)\bigg)\\
&amp;= {\bf 1}^T(-{\bf y} \odot\frac{1}{1+\exp\big({\bf y} \odot (X\text d{\bf w})\big)}\odot X\text d{\bf w})\\
&amp;= \text tr\big({\bf 1}^T(-{\bf y} \odot\frac{1}{1+\exp\big({\bf y} \odot (X\text d{\bf w})\big)}\odot X\text d{\bf w})\big)\\
&amp;= \text tr \big((-{\bf 1} \odot {\bf y} \odot \frac{1}{1+\exp\big({\bf y} \odot (X\text d{\bf w})\big)})^TX\text d{\bf w}\big)\\
&amp;= \text tr \Big(\big(X^T(-{\bf y} \odot \frac{1}{1+\exp\big({\bf y} \odot (X\text d{\bf w})\big)})\big)^T\text d{\bf w}\Big)
\end{align*}
\]</span></p>
<p>所以，</p>
<p>梯度如下： <span class="math display">\[
\begin{align*} 
\nabla_{\bf w} \text{NLL} = X^T(-{\bf y} \odot \frac{1}{1+\exp\big({\bf y} \odot (X\text d{\bf w})\big)})
\end{align*}
\]</span></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasoncoding13.github.io/2019/09/13/2019-09-13-multivariate-normal-distribution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Chan">
      <meta itemprop="description" content="Math">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jasoncoding13's Page">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/13/2019-09-13-multivariate-normal-distribution/" class="post-title-link" itemprop="url">多元正态分布 Multivariate Normal Distribution</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-09-13 09:37:22" itemprop="dateCreated datePublished" datetime="2019-09-13T09:37:22+08:00">2019-09-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-09-24 08:57:31" itemprop="dateModified" datetime="2019-09-24T08:57:31+08:00">2019-09-24</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/statistics/" itemprop="url" rel="index"><span itemprop="name">Statistics</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/09/13/2019-09-13-multivariate-normal-distribution/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/13/2019-09-13-multivariate-normal-distribution/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h3 id="摘要">摘要</h3>
<p>这篇文章的目标是多元正态分布的概率密度函数。</p>
<h3 id="独立多元正态分布">独立多元正态分布</h3>
<p>为了推导多元分布的一般形式，我们先从基本形式开始。假设一组互相独立的变量， <span class="math display">\[
\bf{X_i} \sim \mathcal{N}(0, \sigma_i^2) \quad \forall i = 1, 2, \dots, n
\]</span> 我们记它们的密度函数： <span class="math display">\[
f_{X_i}(x) = \frac{1}{\sqrt{2\pi}\sigma_i}\exp({-\frac{x^2}{2\sigma_i^2}})
\]</span> 因为变量的独立性， 联合概率密度函数为各变量密度函数的乘积： <span class="math display">\[
\begin{align*}
f_X({\bf x}) &amp;= \prod_{i=1}^nf_{X_i}(x_i)\\
&amp;=\prod_{i=1}^n\frac{1}{\sqrt{2\pi}\sigma_i}\exp({-\frac{x_i^2}{2\sigma_i^2}})\\
&amp;=\frac{1}{(\sqrt{2\pi})^n} \times \frac{1}{\prod_{i=1}^n\sqrt{\sigma_i^2}}\times \exp(\sum_{i=1}^n-\frac{x_i^2}{2\sigma_i^2})\\
&amp;=(2\pi)^{-\frac{n}{2}}\times\frac{1}{\sqrt{\det(\Sigma)}}\times \exp(-\frac{1}{2}{\bf x}^T \text{diag}(\frac{1}{\sigma_1^2}, \frac{1}{\sigma_2^2}, \dots, \frac{1}{\sigma_n^2}){\bf x})\\
&amp;=(2\pi)^{-\frac{n}{2}}\det(\Sigma)^{-\frac{1}{2}}\exp(-\frac{1}{2}{\bf x}^T\Sigma^{-1}{\bf x})
\end{align*}
\]</span> 注意此处: <span class="math display">\[
\Sigma = \text{diag}(\sigma_1^2, \sigma_2^2, \dots, \sigma_n^2)\\
\det(\Sigma) = \sigma_i^2\sigma_2^2 \cdots \sigma_n^2\\
\Sigma^{-1} = \text{diag}(\frac{1}{\sigma_1^2}, \frac{1}{\sigma_2^2}, \dots, \frac{1}{\sigma_n^2})
\]</span> 所以，我们得到了在各分量互相独立和均值为0条件下的多元正态分布： <span class="math display">\[
{\bf X} \sim \mathcal{N}({\bf 0}, \Sigma)
\]</span></p>
<h3 id="随机变量的仿射变换">随机变量的仿射变换</h3>
<p>考察仿射变换： <span class="math display">\[
L({\bf x}) =A{\bf x}+ \bf b
\]</span> 其中<span class="math inline">\(A\)</span>是大小为n*n的可逆矩阵，<span class="math inline">\(\bf b\)</span>是长度为n的常数向量。</p>
<p>我们记变换后随机变量组为<span class="math inline">\(\bf Y\)</span>及其期望： <span class="math display">\[
\begin{align*}
{\bf Y}&amp;=L({\bf X})\\
E{\bf Y}&amp;=E(A{\bf X}+{\bf b})\\
&amp;=A(E{\bf X})+{\bf b}\\
&amp;=L(E{\bf X})\\
\end{align*}
\]</span> 协方差： <span class="math display">\[
\begin{align*}
\Sigma_{\bf Y}&amp;=E[({\bf Y}-E{\bf Y})({\bf Y}-E{\bf Y})^T]\\
&amp;= E[\big(A{\bf X}+{\bf b}-A(E{\bf X}+{\bf b})\big)\big(A{\bf X}+{\bf b}-A(E{\bf X}+{\bf b})\big)^T]\\
&amp;= E[A({\bf X}-E{\bf X})\big(A({\bf X}-E{\bf X})\big)^T]\\
&amp;= E[A({\bf X}-E{\bf X})({\bf X}-E{\bf X})^TA^T]\\
&amp;=A\Sigma_XA^T
\end{align*}
\]</span> 所以出发点是，假设我们有一组随机变量<span class="math inline">\(\bf Z\)</span>符合多元正态分布且各分量互相独立，均值为<span class="math inline">\(0\)</span>，方差为<span class="math inline">\(1\)</span>： <span class="math display">\[
{\bf Z} \sim \mathcal{N}({\bf 0}, I)
\]</span> 和一组随机变量<span class="math inline">\(\bf Y\)</span>符合一般多元正态分布： <span class="math display">\[
{\bf Y} \sim \mathcal{N}({\bf \mu_{\bf Y}}, \Sigma_{\bf Y})
\]</span> 我们希望寻找一个仿射变换<span class="math inline">\(L({\bf x})=A{\bf x}+b\)</span>使得： <span class="math display">\[
\mu_{\bf Y} = {\bf b}\\
\Sigma_{\bf Y} = AIA^T
\]</span> 对<span class="math inline">\(\Sigma_{\bf Y}\)</span>为实对称矩阵，使用特征分解： <span class="math display">\[
\Sigma_{\bf Y} = Q \Lambda Q^{-1} = Q \Lambda Q^{T}
\]</span> 记<span class="math inline">\(n \times n\)</span>矩阵<span class="math inline">\(U\)</span>： <span class="math display">\[
U = Q\text{diag}(\sqrt \sigma_1, \sqrt \sigma_2, ..., \sqrt \sigma_n)\\
UU^T=Q\text{diag}(\sqrt \sigma_1, \sqrt \sigma_2, ..., \sqrt \sigma_n)\text{diag}(\sqrt \sigma_1, \sqrt \sigma_2, ..., \sqrt \sigma_n)^TQ^T\\
UU^T=Q\Lambda Q^T=\Sigma_{\bf Y}
\]</span> 得到所需仿射变换： <span class="math display">\[
{\bf y} =U{\bf z} + \mu_{\bf Y}
\]</span></p>
<h3 id="仿射变换与概率密度函数">仿射变换与概率密度函数</h3>
<p>现在我们得到了有限制条件下的多元正态分布<span class="math inline">\({\bf Z} \sim \mathcal{N}({\bf 0}, I)\)</span>和所需的仿射变换<span class="math inline">\({\bf Y} = L({\bf Z})\)</span>。</p>
<p>所以出发点是，我们需要用仿射变换的概率密度函数把有限制条件情况的概率密度函数对一般情况进行推广： <span class="math display">\[
\begin{align*}
f_{\bf Y}({\bf y}) &amp;= f_{\bf Z}({\bf Z})|\det(\frac{d{\bf z}}{d{\bf y}})|\\
&amp;=f_{\bf Z}\big(L^{-1}({\bf y})\big)|\det(\frac{d{\bf z}}{d{\bf y}})|
\end{align*}
\]</span> 其中<span class="math inline">\(L^{-1}(\bf y)\)</span>是<span class="math inline">\(L(\bf x)\)</span>的逆变换： <span class="math display">\[
{\bf z} = U^{-1}({\bf y}-\mu_{\bf Y})\\
\frac{d{\bf z}}{d{\bf y}}=U^{-1}\\
\det(U^{-1})=\frac{1}{\det(U)}\\
\det(\Sigma_{\bf Y}) = \det(UU^T)=\det(U)\det(U^{T}) = \det(U)^2 \geq 0\\
|\det(U^{-1})|=\frac{1}{\sqrt{\det(\Sigma_{\bf Y})}}
\]</span></p>
<h3 id="多元正态分布的概率密度函数">多元正态分布的概率密度函数</h3>
<p>我们有<span class="math inline">\({\bf Z} \sim \mathcal{N}({\bf 0}, I)\)</span>的概率密度函数： <span class="math display">\[
\begin{align*}
f_{\bf Z}(z)&amp;=(2\pi)^{-\frac{n}{2}}\det(\Sigma_{\bf Z})^{-\frac{1}{2}}\exp(-\frac{1}{2}{\bf x}^T\Sigma_{\bf Z}^{-1}{\bf x})\\
&amp;=(2\pi)^{-\frac{n}{2}}\det(I)^{-\frac{1}{2}}\exp(-\frac{1}{2}{\bf x}^TI^{-1}{\bf x})\\
&amp;=(2\pi)^{-\frac{n}{2}}\exp(-\frac{1}{2}{\bf x}^T{\bf x})
\end{align*}
\]</span> 所以，<span class="math inline">\(\bf Y\sim \mathcal N(\mu_{\bf Y}, \Sigma_{\bf Y})\)</span>的概率密度函数： <span class="math display">\[
\begin{align*}
f_{\bf Y}({\bf y})&amp;=f_{\bf X}\big(U^{-1}({\bf y}-\mu_{\bf Y})\big)|\det(U^{-1})|\\
&amp;=(2\pi)^{-\frac{n}{2}}\exp\Big(-\frac{1}{2}\big(U^{-1}({\bf y}-\mu_{\bf Y})\big)^T\big(U^{-1}({\bf y}-\mu_{\bf Y})\big)\Big)\frac{1}{\sqrt{\det(\Sigma_{\bf Y})}}\\
&amp;=(2\pi)^{-\frac{n}{2}}\det(\Sigma_{\bf Y})^{-\frac{1}{2}}\exp\big(-\frac{1}{2}({\bf y}-\mu_{\bf Y})^T(U^{-1})^TU^{-1}({\bf y}-\mu_{\bf Y})\big)\\
&amp;=(2\pi)^{-\frac{n}{2}}\det(\Sigma_{\bf Y})^{-\frac{1}{2}}\exp\big(-\frac{1}{2}({\bf y}-\mu_{\bf Y})^T\Sigma_{\bf Y}^{-1}({\bf y}-\mu_{\bf Y})\big)\\
\end{align*}
\]</span></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasoncoding13.github.io/2019/08/06/2019-08-06-python-string-formatting/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Chan">
      <meta itemprop="description" content="Math">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jasoncoding13's Page">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/08/06/2019-08-06-python-string-formatting/" class="post-title-link" itemprop="url">Python String Formatting</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-06 10:41:23" itemprop="dateCreated datePublished" datetime="2019-08-06T10:41:23+08:00">2019-08-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-09-10 11:25:01" itemprop="dateModified" datetime="2019-09-10T11:25:01+08:00">2019-09-10</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/08/06/2019-08-06-python-string-formatting/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/08/06/2019-08-06-python-string-formatting/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <h3 id="摘要">摘要</h3>
<p>Python 3.0 之后，str的对象支持一个method，<code>str.format()</code>。它是针对原来str所支持的<code>%</code>operator一个优化。这里简单地记录一些用法和例子。</p>
<h3 id="常见使用方法">常见使用方法</h3>
<ol type="1">
<li><p>使用<code>{}</code>作为输出内容的占位符。 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;<span class="string">'&#123;&#125; &#123;&#125;'</span>.format(<span class="string">'Hello'</span>,<span class="string">'World'</span>)</span><br><span class="line"><span class="string">'Hello World'</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>添加key指定输出对应的参数。key为数字时是参数位置的索引，为字符串时是关键字的索引。 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;<span class="string">'&#123;1&#125; &#123;0&#125; &#123;a&#125;'</span>.format(<span class="string">'Hello'</span>,<span class="string">'World'</span>, a=<span class="string">'!'</span>)</span><br><span class="line"><span class="string">'World Hello !'</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>结合<code>*</code>operator解析<code>list</code>，<code>dict</code>。 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;lst = [<span class="string">'Hello'</span>, <span class="string">'World'</span>]</span><br><span class="line">&gt;&gt;&gt;<span class="string">'&#123;&#125; &#123;&#125;'</span>.format(*lst)</span><br><span class="line">Hello World</span><br><span class="line">&gt;&gt;&gt;dct = &#123;<span class="string">'a'</span>:<span class="string">'Hello'</span>, <span class="string">'b'</span>:<span class="string">'World'</span>&#125;</span><br><span class="line">&gt;&gt;&gt;<span class="string">'&#123;a&#125; &#123;b&#125;'</span>.format(**dct)</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure></p></li>
<li><p>Py3.6后还可以用f-string的方式直接制定输出变量。 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;string = <span class="string">'Hello World'</span></span><br><span class="line">&gt;&gt;&gt;<span class="string">f'<span class="subst">&#123;string&#125;</span>'</span></span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure></p></li>
</ol>
<h3 id="输出格式">输出格式</h3>
<ol type="1">
<li>格式化输出的用法如下面例子。<code>:</code>前的部分是上文提及的key，指定输出的内容。<code>:</code>后的<code>.1</code>和<code>.3</code>分别指以小数点后保留1位和3位的格式输出。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;num = <span class="number">0.1313</span></span><br><span class="line">&gt;&gt;&gt;<span class="string">'&#123;:.1&#125;'</span>.format(num)</span><br><span class="line"><span class="string">'0.1'</span></span><br><span class="line">&gt;&gt;&gt;<span class="string">f'<span class="subst">&#123;num:<span class="number">.3</span>&#125;</span>'</span></span><br><span class="line"><span class="string">'0.131'</span></span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>格式的一般形式如下:</li>
</ol>
<p><code>[[fill]align][sign][#][0][minimumwidth][.precision][type]</code></p>
<ol start="3" type="1">
<li>如上文提及<code>[.precision]</code>是指小数点后显示的位数。<code>minimumwidth</code>则是指输出的规定长度。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;f&apos;&#123;num:13&#125;&apos;</span><br><span class="line">&apos;       0.1313&apos;</span><br><span class="line">&gt;&gt;&gt;f&apos;&#123;num:13.3&#125;&apos;</span><br><span class="line">&apos;        0.131&apos;</span><br><span class="line">&gt;&gt;&gt;f&apos;&#123;string:13&#125;&apos;</span><br><span class="line">&apos;Hello World  &apos;</span><br></pre></td></tr></table></figure>
<ol start="4" type="1">
<li><p><code>[[fill]align]</code>指定在内容长度小于规定长度时输出的位置和是否padding补全。 <code>align</code>为<code>&lt;</code>，<code>^</code>，<code>&gt;</code>分别指居左，居中，居右。输出内容是字符串，默认居左。输出内容是数字，默认居右。<code>align</code>还有一种选择是<code>=</code>，指padding补全在符号后数字前。 <code>fill</code>指定padding的字符，默认为空格。 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;f&apos;&#123;num:0&lt;13&#125;&apos;</span><br><span class="line">&apos;0.13130000000&apos;</span><br><span class="line">&gt;&gt;&gt;f&apos;&#123;string:-^13&#125;&apos;</span><br><span class="line">&apos;-Hello World-&apos;</span><br><span class="line">&gt;&gt;&gt;&apos;&#123;:0=13&#125;&apos;.format(-1)  # fill:0 align:= minimumwidth:13</span><br><span class="line">&apos;-000000000001&apos;</span><br></pre></td></tr></table></figure></p></li>
<li><p><code>[sign]</code>指显示数字符号的格式。<code>+</code>表示正负数均带符号。<code>-</code>表示正数不带符号，负数带负号。<code>空格</code>表示正数保留一个空格，负数带负号。</p></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;&apos;&#123;:+&#125; &#123;:+&#125;&apos;.format(1, -1)</span><br><span class="line">&apos;+1 -1&apos;</span><br><span class="line">&gt;&gt;&gt;&apos;&#123;:- :-&#125;&apos;.format(1, -1)</span><br><span class="line">&apos;1 -1&apos;</span><br><span class="line">&gt;&gt;&gt;&apos;&#123;: &#125; &#123;: &#125;&apos;.format(1, -1)</span><br><span class="line">&apos; 1 -1&apos;</span><br></pre></td></tr></table></figure>
<ol start="6" type="1">
<li>参照<code>datetime</code>模块可以实现日期按照指定格式输出。关于<code>%a</code>等指代意义可以参照<span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kZXYvcGVwcy9wZXAtMzEwMQ==" title="https://www.python.org/dev/peps/pep-3101">datetime的官方文档<i class="fa fa-external-link"></i></span>。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;<span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line">&gt;&gt;&gt;<span class="string">'&#123;:%a %b %d %Y&#125;'</span>.format(datetime.now())</span><br><span class="line"><span class="string">'Tue Aug 06 2019'</span></span><br></pre></td></tr></table></figure>
<p>关于格式化其他参数的用法可以参照<span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kZXYvcGVwcy9wZXAtMzEwMQ==" title="https://www.python.org/dev/peps/pep-3101">PEP 3101<i class="fa fa-external-link"></i></span>。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://jasoncoding13.github.io/2019/05/29/2019-05-29-first-post/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jason Chan">
      <meta itemprop="description" content="Math">
      <meta itemprop="image" content="/images/head_portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jasoncoding13's Page">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/05/29/2019-05-29-first-post/" class="post-title-link" itemprop="url">第一篇日志</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-05-29 18:07:45" itemprop="dateCreated datePublished" datetime="2019-05-29T18:07:45+08:00">2019-05-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-09-10 11:25:01" itemprop="dateModified" datetime="2019-09-10T11:25:01+08:00">2019-09-10</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/个人日志/" itemprop="url" rel="index"><span itemprop="name">个人日志</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/05/29/2019-05-29-first-post/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/05/29/2019-05-29-first-post/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        
          
            <p>很久很久没有写日志之类的东西了。</p>
<p>最近两天部署好了自己的主页，有一丁点的不一样的__感觉__。</p>
<p>时间不大够、以后慢慢补主页、</p>
<p>例如相册啊，可以秀恩爱，或者听歌，继续听我的红豆、</p>
<p>在部署过程中，发现自己的毛病又出来了。</p>
<p>本来npm的依赖其实可搞可不搞，我手痒搞了两天、</p>
<p>所以时间终究要挥霍一下才能显得珍贵吗？</p>
<p>我的园园猪猪最珍贵。</p>
<p>时间不大够、现在好好学习、</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/head_portrait.jpg" alt="Jason Chan">
            
              <p class="site-author-name" itemprop="name">Jason Chan</p>
              <div class="site-description motion-element" itemprop="description">Math</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2phc29uY29kaW5nMTM=" title="GitHub &rarr; https://github.com/jasoncoding13"><i class="fa fa-fw fa-github"></i>GitHub</span>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <span class="exturl" data-url="aHR0cHM6Ly91c2VyLnF6b25lLnFxLmNvbS82MjM0MDkyMjI=" title="QQ &rarr; https://user.qzone.qq.com/623409222"><i class="fa fa-fw fa-qq"></i>QQ</span>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <span class="exturl" data-url="aHR0cHM6Ly93d3cud2VpYm8uY29tL3UvMTgyNzEwMzMwNA==" title="Weibo &rarr; https://www.weibo.com/u/1827103304"><i class="fa fa-fw fa-weibo"></i>Weibo</span>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <span class="exturl" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2phc29uY29kaW5nMTM=" title="FB Page &rarr; https://www.facebook.com/jasoncoding13"><i class="fa fa-fw fa-facebook"></i>FB Page</span>
                </span>
              
            </div>
          

          
             <div class="cc-license motion-element" itemprop="license">
              
              
                
              
              
              
              <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></span>
             </div>
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <span class="exturl" data-url="aHR0cDovL2NoYW5rYXNldW4uYmxvZy4xNjMuY29t" title="http://chankaseun.blog.163.com">NetEaseBlog</span>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <span class="exturl" data-url="aHR0cHM6Ly9vY3cubWl0LmVkdS9jb3Vyc2VzL21hdGhlbWF0aWNzLzE4LTA2LWxpbmVhci1hbGdlYnJhLXNwcmluZy0yMDEw" title="https://ocw.mit.edu/courses/mathematics/18-06-linear-algebra-spring-2010">Linear Algebra</span>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason Chan</span>

  

  
</div>


  <div class="powered-by">由 <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <span class="exturl theme-link" data-url="aHR0cHM6Ly90aGVtZS1uZXh0Lm9yZw==">NexT.Gemini</span> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  
  <script src="/js/exturl.js?v=7.1.1"></script>


  

  
  
  <script id="dsq-count-scr" src="https://jasoncoding13.disqus.com/count.js" async></script>







  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('3');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  

  

  

  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@3.3.0/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  

  

  

  

</body>
</html>
